C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                15/07/24  23:32:09  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE SEEKFREE_IPS200_SPI
OBJECT MODULE PLACED IN .\Out_File\SEEKFREE_IPS200_SPI.obj
COMPILER INVOKED BY: D:\c51-keil\C251\BIN\C251.EXE ..\..\Libraries\seekfree_peripheral\SEEKFREE_IPS200_SPI.c XSMALL WARN
                    -INGLEVEL(3) OPTIMIZE(0,SPEED) BROWSE INCDIR(..\..\Libraries\libraries;..\..\Libraries\seekfree_libraries;..\..\Libraries
                    -\seekfree_peripheral;..\CODE;..\USER\inc;..\USER\src;..\..\Libraries\seekfree_components;.\Out_File) DEBUG PRINT(.\Out_F
                    -ile\SEEKFREE_IPS200_SPI.lst) TABS(2) OBJECT(.\Out_File\SEEKFREE_IPS200_SPI.obj) 

stmt  level    source

    1          /********************************************************************************************************
             -*************
    2           * COPYRIGHT NOTICE
    3           * Copyright (c) 2018,é€é£ç§‘æŠ€
    4           * All rights reserved.
    5           * æŠ€æœ¯è®¨è®ºQQç¾¤ï¼šä¸€ç¾¤ï¼š179029047(å·²æ»¡)  äºŒç¾¤ï¼š244861897(å·²æ»¡)  ä¸‰ç¾¤ï¼š824575535
    6           *
    7           * ä»¥ä¸‹æ‰€æœ‰å†…å®¹ç‰ˆæƒå‡å±é€é£ç§‘æŠ€æ‰€æœ‰ï¼Œæœªç»å…è®¸ä¸å¾—ç”¨äºå•†ä¸šç”¨é€”ï¼Œ
    8           * æ¬¢è¿å„ä½ä½¿ç”¨å¹¶ä¼ æ’­æœ¬ç¨‹åºï¼Œä¿®æ”¹å†…å®¹æ—¶å¿…é¡»ä¿ç•™é€é£ç§‘æŠ€çš„ç‰ˆæƒå£°æ˜ã€‚
    9           *
   10           * @file          IPS200_SPI
   11           * @company       æˆéƒ½é€é£ç§‘æŠ€æœ‰é™å…¬å¸
   12           * @author        é€é£ç§‘æŠ€(QQ3184284598)
   13           * @version       æŸ¥çœ‹docå†…versionæ–‡ä»¶ ç‰ˆæœ¬è¯´æ˜
   14           * @Software    MDK FOR C251 V5.60
   15           * @Target core   STC32F12K
   16           * @Taobao      https://seekfree.taobao.com/
   17           * @date          2019-11-15
   18           * @note    
   19                    æ¥çº¿å®šä¹‰ï¼š
   20                    ------------------------------------ 
   21                    2.0å¯¸IPSæ¨¡å—ç®¡è„š       å•ç‰‡æœºç®¡è„š
   22                    SCL                   æŸ¥çœ‹SEEKFREE_IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_SCL   å®å®šä¹‰     ç¡¬ä»¶SPIå¼•è„
             -šä¸å¯éšæ„åˆ‡æ¢
   23                    SDA                   æŸ¥çœ‹SEEKFREE_IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_SDA   å®å®šä¹‰     ç¡¬ä»¶SPIå¼•è„
             -šä¸å¯éšæ„åˆ‡æ¢
   24                    RES                   æŸ¥çœ‹SEEKFREE_IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_RST_PIN å®å®šä¹‰    
   25                    DC                    æŸ¥çœ‹SEEKFREE_IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_DC_PIN  å®å®šä¹‰  
   26                    CS                    æŸ¥çœ‹SEEKFREE_IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_CS    å®å®šä¹‰     ç¡¬ä»¶SPIå¼•è„š
             -ä¸å¯éšæ„åˆ‡æ¢
   27                    BL            æŸ¥çœ‹SEEKFREE_IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_BL_PIN  å®å®šä¹‰
   28                    
   29                    ç”µæºå¼•è„š
   30                    VCC 3.3Vç”µæº
   31                    GND ç”µæºåœ°
   32                    æœ€å¤§åˆ†è¾¨ç‡320*240
   33                    ------------------------------------ 
   34           ********************************************************************************************************
             -************/
   35          
   36          
   37          #include "SEEKFREE_IPS200_SPI.h"
   38          #include "SEEKFREE_FONT.h"
   39          #include "SEEKFREE_FUNCTION.h"
   40          
   41          
   42          #include "zf_spi.h"
   43          #include "zf_delay.h"
   44          
   45          static uint16 ips200_pencolor = IPS200_DEFAULT_PENCOLOR;
   46          static uint16 ips200_bgcolor  = IPS200_DEFAULT_BGCOLOR;
   47          
   48          static ips200_type_enum         ips200_display_type = IPS200_TYPE_SPI;
   49          static ips200_dir_enum          ips200_display_dir  = IPS200_DEFAULT_DISPLAY_DIR;
   50          static ips200_font_size_enum    ips200_display_font = IPS200_DEFAULT_DISPLAY_FONT;
   51          
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                15/07/24  23:32:09  PAGE 2   

   52          static uint16 ips200_x_max = 240;
   53          static uint16 ips200_y_max = 320;
   54          
   55          //-------------------------------------------------------------------------------------------------------
             -------------
   56          // å‡½æ•°ç®€ä»‹     IPS200 SPI å†™ 8bit æ•°æ®
   57          // å‚æ•°è¯´æ˜     data            æ•°æ®
   58          // è¿”å›å‚æ•°     void
   59          // ä½¿ç”¨ç¤ºä¾‹     ips200_write_8bit_data_spi(command);
   60          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨
   61          //-------------------------------------------------------------------------------------------------------
             -------------
   62          void ips200_write_8bit_data_spi(uint8 dat)    
   63          {
   64   1        spi_mosi(dat);
   65   1      
   66   1      }
   67          
   68          //-------------------------------------------------------------------------------------------------------
             -------------
   69          // å‡½æ•°ç®€ä»‹     IPS200 SPI å†™ 16bit æ•°æ®
   70          // å‚æ•°è¯´æ˜     data            æ•°æ®
   71          // è¿”å›å‚æ•°     void
   72          // ä½¿ç”¨ç¤ºä¾‹     ips200_write_16bit_data_spi(dat);
   73          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨
   74          //-------------------------------------------------------------------------------------------------------
             -------------
   75          void ips200_write_16bit_data_spi(uint16 dat)   
   76          {
   77   1          uint8 dat1[2];
   78   1          dat1[0] = dat >> 8;
   79   1          dat1[1] = (uint8)dat;
   80   1        
   81   1        spi_mosi(dat1[0]);  //å†™å…¥æ•°æ®  é«˜ä½åœ¨å‰  ä½ä½åœ¨å
   82   1        spi_mosi(dat1[1]);
   83   1      }
   84          
   85          
   86          //-------------------------------------------------------------------------------------------------------
             -------------
   87          // å‡½æ•°ç®€ä»‹     IPS200 å†™å‘½ä»¤
   88          // å‚æ•°è¯´æ˜     command         å‘½ä»¤
   89          // è¿”å›å‚æ•°     void
   90          // ä½¿ç”¨ç¤ºä¾‹     ips200_write_command(0x2a);
   91          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨ ç”¨æˆ·æ— éœ€å…³å¿ƒ
   92          //-------------------------------------------------------------------------------------------------------
             -------------
   93          static void ips200_write_command (const uint8 command)
   94          {
   95   1      
   96   1        IPS200_CS(1);
   97   1        IPS200_CS(0);
   98   1        IPS200_DC(0);
   99   1        ips200_write_8bit_data_spi(command);
  100   1        IPS200_DC(1);
  101   1        IPS200_CS(1);
  102   1        IPS200_CS(0);
  103   1      
  104   1      }
  105          
  106          //-------------------------------------------------------------------------------------------------------
             -------------
  107          // å‡½æ•°ç®€ä»‹     IPS200 å‘æ¶²æ™¶å±å†™ 8bit æ•°æ®
  108          // å‚æ•°è¯´æ˜     dat             æ•°æ®
  109          // è¿”å›å‚æ•°     void
  110          // ä½¿ç”¨ç¤ºä¾‹     ips200_write_8bit_data(0x0C);
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                15/07/24  23:32:09  PAGE 3   

  111          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨ ç”¨æˆ·æ— éœ€å…³å¿ƒ
  112          //-------------------------------------------------------------------------------------------------------
             -------------
  113          static void ips200_write_8bit_data (const uint8 dat)
  114          {
  115   1        IPS200_CS(0);
  116   1          IPS200_DC(1);
  117   1        ips200_write_8bit_data_spi(dat);
  118   1        IPS200_CS(1);
  119   1      }
  120          
  121          //-------------------------------------------------------------------------------------------------------
             -------------
  122          // å‡½æ•°ç®€ä»‹     IPS200 å‘æ¶²æ™¶å±å†™ 16bit æ•°æ®
  123          // å‚æ•°è¯´æ˜     dat             æ•°æ®
  124          // è¿”å›å‚æ•°     void
  125          // ä½¿ç”¨ç¤ºä¾‹     ips200_write_16bit_data(x1);
  126          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨ ç”¨æˆ·æ— éœ€å…³å¿ƒ
  127          //-------------------------------------------------------------------------------------------------------
             -------------
  128          static void ips200_write_16bit_data (const uint16 dat)
  129          {
  130   1        IPS200_CS(0);
  131   1          IPS200_DC(1);
  132   1        ips200_write_16bit_data_spi(dat);
  133   1        IPS200_CS(1);
  134   1      }
  135          
  136          //-------------------------------------------------------------------------------------------------------
             -------------
  137          // å‡½æ•°ç®€ä»‹     è®¾ç½®æ˜¾ç¤ºåŒºåŸŸ
  138          // å‚æ•°è¯´æ˜     x1              èµ·å§‹xè½´åæ ‡
  139          // å‚æ•°è¯´æ˜     y1              èµ·å§‹yè½´åæ ‡
  140          // å‚æ•°è¯´æ˜     x2              ç»“æŸxè½´åæ ‡
  141          // å‚æ•°è¯´æ˜     y2              ç»“æŸyè½´åæ ‡
  142          // è¿”å›å‚æ•°     void
  143          // ä½¿ç”¨ç¤ºä¾‹     ips200_set_region(0, 0, ips200_x_max - 1, ips200_y_max - 1);
  144          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨ ç”¨æˆ·æ— éœ€å…³å¿ƒ
  145          //-------------------------------------------------------------------------------------------------------
             -------------
  146          static void ips200_set_region (uint16 x1, uint16 y1, uint16 x2, uint16 y2)
  147          {
  148   1      
  149   1      
  150   1          ips200_write_command(0x2a);
  151   1          ips200_write_16bit_data(x1);
  152   1          ips200_write_16bit_data(x2);
  153   1          
  154   1          ips200_write_command(0x2b);
  155   1          ips200_write_16bit_data(y1);
  156   1          ips200_write_16bit_data(y2);
  157   1          
  158   1          ips200_write_command(0x2c);
  159   1      }
  160          
  161          
  162          //-------------------------------------------------------------------------------------------------------
             -------------
  163          // å‡½æ•°ç®€ä»‹     IPS200 æ¸…å±å‡½æ•°
  164          // å‚æ•°è¯´æ˜     void
  165          // è¿”å›å‚æ•°     void
  166          // ä½¿ç”¨ç¤ºä¾‹     ips200_clear();
  167          // å¤‡æ³¨ä¿¡æ¯     å°†å±å¹•æ¸…ç©ºæˆèƒŒæ™¯é¢œè‰²
  168          //-------------------------------------------------------------------------------------------------------
             -------------
  169          void ips200_clear (void)
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                15/07/24  23:32:09  PAGE 4   

  170          {
  171   1          uint16 i, j;
  172   1        IPS200_CS(0);
  173   1      
  174   1          ips200_set_region(0, 0, ips200_x_max - 1, ips200_y_max - 1);
  175   1          for(i = 0; i < ips200_x_max; i ++)
  176   1          {
  177   2              for (j = 0; j < ips200_y_max; j ++)
  178   2              {
  179   3                  ips200_write_16bit_data(ips200_bgcolor);                 
  180   3              }
  181   2          }
  182   1      
  183   1        IPS200_CS(1);
  184   1      
  185   1      }
  186          
  187          //-------------------------------------------------------------------------------------------------------
             -------------
  188          // å‡½æ•°ç®€ä»‹     IPS200 å±å¹•å¡«å……å‡½æ•°
  189          // å‚æ•°è¯´æ˜     color           é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ zf_common_font.h å†… rgb565_co
             -lor_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  190          // è¿”å›å‚æ•°     void
  191          // ä½¿ç”¨ç¤ºä¾‹     ips200_full(RGB565_BLACK);
  192          // å¤‡æ³¨ä¿¡æ¯     å°†å±å¹•å¡«å……æˆæŒ‡å®šé¢œè‰²
  193          //-------------------------------------------------------------------------------------------------------
             -------------
  194          void ips200_full (const uint16 color)
  195          {
  196   1          uint16 i, j;
  197   1      
  198   1        IPS200_CS(0);
  199   1      
  200   1          ips200_set_region(0, 0, ips200_x_max - 1, ips200_y_max - 1);
  201   1          for(i = 0; i < ips200_x_max; i ++)
  202   1          {
  203   2              for (j = 0; j < ips200_y_max; j ++)
  204   2              {
  205   3                  ips200_write_16bit_data(color);                 
  206   3              }
  207   2          }
  208   1      
  209   1        IPS200_CS(1);
  210   1      
  211   1      }
  212          
  213          //-------------------------------------------------------------------------------------------------------
             -------------
  214          // å‡½æ•°ç®€ä»‹     è®¾ç½®æ˜¾ç¤ºæ–¹å‘
  215          // å‚æ•°è¯´æ˜     dir             æ˜¾ç¤ºæ–¹å‘  å‚ç…§ zf_device_ips200.h å†… ips200_dir_enum æšä¸¾ä½“
             -å®šä¹‰
  216          // è¿”å›å‚æ•°     void
  217          // ä½¿ç”¨ç¤ºä¾‹     ips200_set_dir(IPS200_PORTAIT);
  218          // å¤‡æ³¨ä¿¡æ¯     è¿™ä¸ªå‡½æ•°åªæœ‰åœ¨åˆå§‹åŒ–å±å¹•ä¹‹å‰è°ƒç”¨æ‰ç”Ÿæ•ˆ
  219          //-------------------------------------------------------------------------------------------------------
             -------------
  220          void ips200_set_dir (ips200_dir_enum dir)
  221          {
  222   1          ips200_display_dir = dir;
  223   1          if(dir < 2)
  224   1          {
  225   2              ips200_x_max = 240;
  226   2              ips200_y_max = 320;
  227   2          }
  228   1          else
  229   1          {
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                15/07/24  23:32:09  PAGE 5   

  230   2              ips200_x_max = 320;
  231   2              ips200_y_max = 240;
  232   2          }
  233   1      }
  234          
  235          //-------------------------------------------------------------------------------------------------------
             -------------
  236          // å‡½æ•°ç®€ä»‹     è®¾ç½®æ˜¾ç¤ºå­—ä½“
  237          // å‚æ•°è¯´æ˜     dir             æ˜¾ç¤ºæ–¹å‘  å‚ç…§ zf_device_ips200.h å†… ips200_font_size_enum æš
             -ä¸¾ä½“å®šä¹‰
  238          // è¿”å›å‚æ•°     void
  239          // ä½¿ç”¨ç¤ºä¾‹     ips200_set_font(IPS200_8x16_FONT);
  240          // å¤‡æ³¨ä¿¡æ¯     å­—ä½“å¯ä»¥éšæ—¶è‡ªç”±è®¾ç½® è®¾ç½®åç”Ÿæ•ˆ åç»­æ˜¾ç¤ºå°±æ˜¯æ–°çš„å­—ä½“å¤§å°
  241          //-------------------------------------------------------------------------------------------------------
             -------------
  242          void ips200_set_font (ips200_font_size_enum font)
  243          {
  244   1          ips200_display_font = font;
  245   1      }
  246          
  247          //-------------------------------------------------------------------------------------------------------
             -------------
  248          // å‡½æ•°ç®€ä»‹     è®¾ç½®æ˜¾ç¤ºé¢œè‰²
  249          // å‚æ•°è¯´æ˜     pen             é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ zf_common_font.h å†… rgb565_co
             -lor_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  250          // å‚æ•°è¯´æ˜     bgcolor         é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ zf_common_font.h å†… rgb565_co
             -lor_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  251          // è¿”å›å‚æ•°     void
  252          // ä½¿ç”¨ç¤ºä¾‹     ips200_set_color(RGB565_RED, RGB565_GRAY);
  253          // å¤‡æ³¨ä¿¡æ¯     å­—ä½“é¢œè‰²å’ŒèƒŒæ™¯é¢œè‰²ä¹Ÿå¯ä»¥éšæ—¶è‡ªç”±è®¾ç½® è®¾ç½®åç”Ÿæ•ˆ
  254          //-------------------------------------------------------------------------------------------------------
             -------------
  255          void ips200_set_color (const uint16 pen, const uint16 bgcolor)
  256          {
  257   1          ips200_pencolor = pen;
  258   1          ips200_bgcolor = bgcolor;
  259   1      }
  260          
  261          //-------------------------------------------------------------------------------------------------------
             -------------
  262          // å‡½æ•°ç®€ä»‹     IPS200 ç”»ç‚¹
  263          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ [0, ips200_x_max-1]
  264          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ [0, ips200_y_max-1]
  265          // å‚æ•°è¯´æ˜     color           é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ zf_common_font.h å†… rgb565_co
             -lor_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  266          // è¿”å›å‚æ•°     void
  267          // ä½¿ç”¨ç¤ºä¾‹     ips200_draw_point(0, 0, RGB565_RED);            //åæ ‡0,0ç”»ä¸€ä¸ªçº¢è‰²çš„ç‚¹
  268          // å¤‡æ³¨ä¿¡æ¯
  269          //-------------------------------------------------------------------------------------------------------
             -------------
  270          void ips200_draw_point (uint16 x, uint16 y, const uint16 color)
  271          {
  272   1      
  273   1      
  274   1        IPS200_CS(0);
  275   1      
  276   1          ips200_set_region(x, y, x, y);
  277   1          ips200_write_16bit_data(color);
  278   1      
  279   1        IPS200_CS(1);
  280   1      
  281   1      }
  282          
  283          //-------------------------------------------------------------------------------------------------------
             -------------
  284          // å‡½æ•°ç®€ä»‹     IPS200 ç”»çº¿
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                15/07/24  23:32:09  PAGE 6   

  285          // å‚æ•°è¯´æ˜     x_start         åæ ‡xæ–¹å‘çš„èµ·ç‚¹ [0, ips200_x_max-1]
  286          // å‚æ•°è¯´æ˜     y_start         åæ ‡yæ–¹å‘çš„èµ·ç‚¹ [0, ips200_y_max-1]
  287          // å‚æ•°è¯´æ˜     x_end           åæ ‡xæ–¹å‘çš„ç»ˆç‚¹ [0, ips200_x_max-1]
  288          // å‚æ•°è¯´æ˜     y_end           åæ ‡yæ–¹å‘çš„ç»ˆç‚¹ [0, ips200_y_max-1]
  289          // å‚æ•°è¯´æ˜     color           é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ zf_common_font.h å†… rgb565_co
             -lor_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  290          // è¿”å›å‚æ•°     void
  291          // ä½¿ç”¨ç¤ºä¾‹     ips200_draw_line(0, 0, 10, 10, RGB565_RED);     // åæ ‡ 0,0 åˆ° 10,10 ç”»ä¸€æ¡çº¢è
             -‰²çš„çº¿
  292          // å¤‡æ³¨ä¿¡æ¯
  293          //-------------------------------------------------------------------------------------------------------
             -------------
  294          void ips200_draw_line (uint16 x_start, uint16 y_start, uint16 x_end, uint16 y_end, const uint16 color)
  295          {
  296   1      
  297   1          int16 x_dir = (x_start < x_end ? 1 : -1);
  298   1          int16 y_dir = (y_start < y_end ? 1 : -1);
  299   1          float temp_rate = 0;
  300   1          float temp_b = 0;
  301   1      
  302   1          do
  303   1          {
  304   2              if(x_start != x_end)
  305   2              {
  306   3                  temp_rate = (float)(y_start - y_end) / (float)(x_start - x_end);
  307   3                  temp_b = (float)y_start - (float)x_start * temp_rate;
  308   3              }
  309   2              else
  310   2              {
  311   3                  while(y_start != y_end)
  312   3                  {
  313   4                      ips200_draw_point(x_start, y_start, color);
  314   4                      y_start += y_dir;
  315   4                  }
  316   3                  break;
  317   3              }
  318   2          
  319   2              if((func_abs(y_start - y_end)) > (func_abs(x_start - x_end)))
  320   2              {
  321   3                  while(y_start != y_end)
  322   3                  {
  323   4                      ips200_draw_point(x_start, y_start, color);
  324   4                      y_start += y_dir;
  325   4                      x_start = (int16)(((float)y_start - temp_b) / temp_rate);
  326   4                  }
  327   3              }
  328   2              else
  329   2              {
  330   3                  while(x_start != x_end)
  331   3                  {
  332   4                      ips200_draw_point(x_start, y_start, color);
  333   4                      x_start += x_dir;
  334   4                      y_start = (int16)((float)x_start * temp_rate + temp_b);
  335   4                  }
  336   3              }
  337   2          }while(0);
  338   1      }
  339          
  340          //-------------------------------------------------------------------------------------------------------
             -------------
  341          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤ºå­—ç¬¦
  342          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  343          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  344          // å‚æ•°è¯´æ˜     dat             éœ€è¦æ˜¾ç¤ºçš„å­—ç¬¦
  345          // è¿”å›å‚æ•°     void
  346          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_char(0, 0, 'x');                     // åæ ‡0,0å†™ä¸€ä¸ªå­—ç¬¦x
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                15/07/24  23:32:09  PAGE 7   

  347          // å¤‡æ³¨ä¿¡æ¯
  348          //-------------------------------------------------------------------------------------------------------
             -------------
  349          void ips200_show_char (uint16 x, uint16 y, const char dat)
  350          {
  351   1          uint8 i, j;
  352   1        uint8 temp_top;
  353   1        uint8 temp_bottom;
  354   1      
  355   1        IPS200_CS(0);
  356   1      
  357   1          switch(ips200_display_font)
  358   1          {
  359   2              case IPS200_6X8_FONT:
  360   2                  for(i = 0; i < 6; i ++)
  361   2                  {
  362   3                      ips200_set_region(x + i, y, x + i, y + 8);
  363   3                      // å‡ 32 å› ä¸ºæ˜¯å–æ¨¡æ˜¯ä»ç©ºæ ¼å¼€å§‹å–å¾— ç©ºæ ¼åœ¨ ascii ä¸­åºå·æ˜¯ 32
  364   3                      temp_top = ascii_font_6x8[dat - 32][i];
  365   3                      for(j = 0; j < 8; j ++)
  366   3                      {
  367   4                          if(temp_top & 0x01)
  368   4                          {
  369   5                              ips200_write_16bit_data(ips200_pencolor);
  370   5                          }
  371   4                          else
  372   4                          {
  373   5                              ips200_write_16bit_data(ips200_bgcolor);
  374   5                          }
  375   4                          temp_top >>= 1;
  376   4                      }
  377   3                  }
  378   2                  break;
  379   2              case IPS200_8X16_FONT:
  380   2                  for(i = 0; i < 8; i ++)
  381   2                  {
  382   3                      ips200_set_region(x + i, y, x + i, y + 15);
  383   3                      // å‡ 32 å› ä¸ºæ˜¯å–æ¨¡æ˜¯ä»ç©ºæ ¼å¼€å§‹å–å¾— ç©ºæ ¼åœ¨ ascii ä¸­åºå·æ˜¯ 32
  384   3                      temp_top = ascii_font_8x16[dat - 32][i];
  385   3                      temp_bottom = ascii_font_8x16[dat - 32][i + 8];
  386   3                      for(j = 0; j < 8; j ++)
  387   3                      {
  388   4                          if(temp_top & 0x01)
  389   4                          {
  390   5                              ips200_write_16bit_data(ips200_pencolor);
  391   5                          }
  392   4                          else
  393   4                          {
  394   5                              ips200_write_16bit_data(ips200_bgcolor);
  395   5                          }
  396   4                          temp_top >>= 1;
  397   4                      }
  398   3                      for(j = 0; j < 8; j ++)
  399   3                      {
  400   4                          if(temp_bottom & 0x01)
  401   4                          {
  402   5                              ips200_write_16bit_data(ips200_pencolor);
  403   5                          }
  404   4                          else
  405   4                          {
  406   5                              ips200_write_16bit_data(ips200_bgcolor);
  407   5                          }
  408   4                          temp_bottom >>= 1;
  409   4                      }
  410   3                  }
  411   2                  break;
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                15/07/24  23:32:09  PAGE 8   

  412   2              case IPS200_16X16_FONT:
  413   2                  // æš‚ä¸æ”¯æŒ
  414   2                  break;
  415   2          }
  416   1      
  417   1        IPS200_CS(1);
  418   1      
  419   1      }
  420          
  421          //-------------------------------------------------------------------------------------------------------
             -------------
  422          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤ºå­—ç¬¦ä¸²
  423          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  424          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  425          // å‚æ•°è¯´æ˜     dat             éœ€è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²
  426          // è¿”å›å‚æ•°     void
  427          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_string(0, 0, "seekfree");
  428          // å¤‡æ³¨ä¿¡æ¯
  429          //-------------------------------------------------------------------------------------------------------
             -------------
  430          void ips200_show_string (uint16 x, uint16 y, const char dat[])
  431          {
  432   1      
  433   1          uint16 j = 0;
  434   1          while(dat[j] != '\0')
  435   1          {
  436   2              switch(ips200_display_font)
  437   2              {
  438   3                  case IPS200_6X8_FONT:
  439   3                      ips200_show_char(x + 6 * j, y, dat[j]);
  440   3                      j ++;
  441   3                      break;
  442   3                  case IPS200_8X16_FONT:
  443   3                      ips200_show_char(x + 8 * j, y, dat[j]);
  444   3                      j ++;
  445   3                      break;
  446   3                  case IPS200_16X16_FONT:
  447   3                      // æš‚ä¸æ”¯æŒ
  448   3                      break;
  449   3              }
  450   2          }
  451   1      }
  452          
  453          //-------------------------------------------------------------------------------------------------------
             -------------
  454          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤º32ä½æœ‰ç¬¦å· (å»é™¤æ•´æ•°éƒ¨åˆ†æ— æ•ˆçš„0)
  455          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  456          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  457          // å‚æ•°è¯´æ˜     dat             éœ€è¦æ˜¾ç¤ºçš„å˜é‡ æ•°æ®ç±»å‹ int32
  458          // å‚æ•°è¯´æ˜     num             éœ€è¦æ˜¾ç¤ºçš„ä½æ•° æœ€é«˜10ä½  ä¸åŒ…å«æ­£è´Ÿå·
  459          // è¿”å›å‚æ•°     void
  460          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_int(0, 0, x, 3);                    // x å¯ä»¥ä¸º int32 int16 int8 ç±»å
             -‹
  461          // å¤‡æ³¨ä¿¡æ¯     è´Ÿæ•°ä¼šæ˜¾ç¤ºä¸€ä¸ª â€˜-â€™å·   æ­£æ•°æ˜¾ç¤ºä¸€ä¸ªç©ºæ ¼
  462          //-------------------------------------------------------------------------------------------------------
             -------------
  463          void ips200_show_int (uint16 x, uint16 y, const int32 dat, uint8 num)
  464          {
  465   1      
  466   1      
  467   1          int32 dat_temp = dat;
  468   1          int32 offset = 1;
  469   1          char data_buffer[12];
  470   1      
  471   1          memset(data_buffer, 0, 12);
  472   1          memset(data_buffer, ' ', num+1);
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                15/07/24  23:32:09  PAGE 9   

  473   1      
  474   1          if(num < 10)
  475   1          {
  476   2              for(; num > 0; num --)
  477   2              {
  478   3                  offset *= 10;
  479   3              }
  480   2              dat_temp %= offset;
  481   2          }
  482   1          func_int_to_str(data_buffer, dat_temp);
  483   1          ips200_show_string(x, y, (const char *)&data_buffer);
  484   1      }
  485          
  486          //-------------------------------------------------------------------------------------------------------
             -------------
  487          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤º32ä½æ— ç¬¦å· (å»é™¤æ•´æ•°éƒ¨åˆ†æ— æ•ˆçš„0)
  488          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, IPS200_x_max-1]
  489          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, IPS200_y_max-1]
  490          // å‚æ•°è¯´æ˜     dat             éœ€è¦æ˜¾ç¤ºçš„å˜é‡ æ•°æ®ç±»å‹ uint32
  491          // å‚æ•°è¯´æ˜     num             éœ€è¦æ˜¾ç¤ºçš„ä½æ•° æœ€é«˜10ä½  ä¸åŒ…å«æ­£è´Ÿå·
  492          // è¿”å›å‚æ•°     void
  493          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_uint(0, 0, x, 3);                   // x å¯ä»¥ä¸º uint32 uint16 uint8 ç±
             -»å‹
  494          // å¤‡æ³¨ä¿¡æ¯
  495          //-------------------------------------------------------------------------------------------------------
             -------------
  496          void ips200_show_uint (uint16 x, uint16 y, const uint32 dat, uint8 num)
  497          {
  498   1          uint32 dat_temp = dat;
  499   1          int32 offset = 1;
  500   1          char data_buffer[12];
  501   1          memset(data_buffer, 0, 12);
  502   1          memset(data_buffer, ' ', num);
  503   1      
  504   1          if(num < 10)
  505   1          {
  506   2              for(; num > 0; num --)
  507   2              {
  508   3                  offset *= 10;
  509   3              }
  510   2              dat_temp %= offset;
  511   2          }
  512   1          func_uint_to_str(data_buffer, dat_temp);
  513   1          ips200_show_string(x, y, (const char *)&data_buffer);
  514   1      }
  515          
  516          //-------------------------------------------------------------------------------------------------------
             -------------
  517          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤ºæµ®ç‚¹æ•°(å»é™¤æ•´æ•°éƒ¨åˆ†æ— æ•ˆçš„0)
  518          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  519          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  520          // å‚æ•°è¯´æ˜     dat             éœ€è¦æ˜¾ç¤ºçš„å˜é‡ï¼Œæ•°æ®ç±»å‹floatæˆ–double
  521          // å‚æ•°è¯´æ˜     num             æ•´æ•°ä½æ˜¾ç¤ºé•¿åº¦   æœ€é«˜8ä½
  522          // å‚æ•°è¯´æ˜     pointnum        å°æ•°ä½æ˜¾ç¤ºé•¿åº¦   æœ€é«˜6ä½
  523          // è¿”å›å‚æ•°     void
  524          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_float(0, 0, x, 2, 3);               // æ˜¾ç¤ºæµ®ç‚¹æ•°   æ•´æ•°æ˜¾ç¤º2ä½
             -   å°æ•°æ˜¾ç¤ºä¸‰ä½
  525          // å¤‡æ³¨ä¿¡æ¯     ç‰¹åˆ«æ³¨æ„å½“å‘ç°å°æ•°éƒ¨åˆ†æ˜¾ç¤ºçš„å€¼ä¸ä½ å†™å…¥çš„å€¼ä¸ä¸€æ ·çš„æ—¶å€™ï¼Œ
  526          //              å¯èƒ½æ˜¯ç”±äºæµ®ç‚¹æ•°ç²¾åº¦ä¸¢å¤±é—®é¢˜å¯¼è‡´çš„ï¼Œè¿™å¹¶ä¸æ˜¯æ˜¾ç¤ºå‡½æ•°çš„é—®é¢˜ï¼
             -Œ
  527          //              æœ‰å…³é—®é¢˜çš„è¯¦æƒ…ï¼Œè¯·è‡ªè¡Œç™¾åº¦å­¦ä¹    æµ®ç‚¹æ•°ç²¾åº¦ä¸¢å¤±é—®é¢˜ã€‚
  528          //              è´Ÿæ•°ä¼šæ˜¾ç¤ºä¸€ä¸ª â€˜-â€™å·   æ­£æ•°æ˜¾ç¤ºä¸€ä¸ªç©ºæ ¼
  529          //-------------------------------------------------------------------------------------------------------
             -------------
  530          void ips200_show_float (uint16 x, uint16 y, const double dat, uint8 num, uint8 pointnum)
  531          {
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                15/07/24  23:32:09  PAGE 10  

  532   1      
  533   1          double dat_temp = dat;
  534   1          double offset = 1.0;
  535   1          char data_buffer[17];
  536   1          memset(data_buffer, 0, 17);
  537   1          memset(data_buffer, ' ', num+pointnum+2);
  538   1      
  539   1          if(num < 10)
  540   1          {
  541   2              for(; num > 0; num --)
  542   2              {
  543   3                  offset *= 10;
  544   3              }
  545   2              dat_temp = dat_temp - ((int)dat_temp / (int)offset) * offset;
  546   2          }
  547   1          func_double_to_str(data_buffer, dat_temp, pointnum);
  548   1          ips200_show_string(x, y, data_buffer);
  549   1      }
  550          
  551          
  552          
  553          
  554          //-------------------------------------------------------------------------------------------------------
             -------------
  555          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤ºæ³¢å½¢
  556          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  557          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  558          // å‚æ•°è¯´æ˜     *wave           æ³¢å½¢æ•°ç»„æŒ‡é’ˆ
  559          // å‚æ•°è¯´æ˜     width           æ³¢å½¢å®é™…å®½åº¦
  560          // å‚æ•°è¯´æ˜     value_max       æ³¢å½¢å®é™…æœ€å¤§å€¼
  561          // å‚æ•°è¯´æ˜     dis_width       æ³¢å½¢æ˜¾ç¤ºå®½åº¦ å‚æ•°èŒƒå›´ [0, ips200_x_max]
  562          // å‚æ•°è¯´æ˜     dis_value_max   æ³¢å½¢æ˜¾ç¤ºæœ€å¤§å€¼ å‚æ•°èŒƒå›´ [0, ips200_y_max]
  563          // è¿”å›å‚æ•°     void
  564          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_wave(0, 0, data, 128, 64, 64, 32);
  565          // å¤‡æ³¨ä¿¡æ¯
  566          //-------------------------------------------------------------------------------------------------------
             -------------
  567          void ips200_show_wave (uint16 x, uint16 y, const uint16 *wave, uint16 width, uint16 value_max, uint16 dis
             -_width, uint16 dis_value_max)
  568          {
  569   1      
  570   1          uint32 i = 0, j = 0;
  571   1          uint32 width_index = 0, value_max_index = 0;
  572   1      
  573   1      
  574   1        IPS200_CS(0);
  575   1      
  576   1          ips200_set_region(x, y, x + dis_width - 1, y + dis_value_max - 1);          // è®¾ç½®æ˜¾ç¤ºåŒºåŸŸ
  577   1          for(i = 0; i < dis_value_max; i ++)
  578   1          {
  579   2              for(j = 0; j < dis_width; j ++)
  580   2              {
  581   3                  ips200_write_16bit_data(ips200_bgcolor); 
  582   3              }
  583   2          }
  584   1      
  585   1        IPS200_CS(1);
  586   1      
  587   1      
  588   1          for(i = 0; i < dis_width; i ++)
  589   1          {
  590   2              width_index = i * width / dis_width;
  591   2              value_max_index = *(wave + width_index) * (dis_value_max - 1) / value_max;
  592   2              ips200_draw_point(i + x, (dis_value_max - 1) - value_max_index + y, ips200_pencolor);
  593   2          }
  594   1      }
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                15/07/24  23:32:09  PAGE 11  

  595          
  596          //-------------------------------------------------------------------------------------------------------
             -------------
  597          // å‡½æ•°ç®€ä»‹     æ±‰å­—æ˜¾ç¤º
  598          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  599          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  600          // å‚æ•°è¯´æ˜     size            å–æ¨¡çš„æ—¶å€™è®¾ç½®çš„æ±‰å­—å­—ä½“å¤§å° ä¹Ÿå°±æ˜¯ä¸€ä¸ªæ±‰å­—å ç”
             -¨çš„ç‚¹é˜µé•¿å®½ä¸ºå¤šå°‘ä¸ªç‚¹ å–æ¨¡çš„æ—¶å€™éœ€è¦é•¿å®½æ˜¯ä¸€æ ·çš„
  601          // å‚æ•°è¯´æ˜     *chinese_buffer éœ€è¦æ˜¾ç¤ºçš„æ±‰å­—æ•°ç»„
  602          // å‚æ•°è¯´æ˜     number          éœ€è¦æ˜¾ç¤ºå¤šå°‘ä½
  603          // å‚æ•°è¯´æ˜     color           é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ zf_common_font.h å†… rgb565_co
             -lor_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  604          // è¿”å›å‚æ•°     void
  605          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_chinese(0, 0, 16, chinese_test[0], 4, RGB565_RED);//æ˜¾ç¤ºfontæ–‡ä»¶é‡Œé
             -¢çš„ ç¤ºä¾‹
  606          // å¤‡æ³¨ä¿¡æ¯     ä½¿ç”¨PCtoLCD2002è½¯ä»¶å–æ¨¡           é˜´ç ã€é€è¡Œå¼ã€é¡ºå‘   16*16
  607          //-------------------------------------------------------------------------------------------------------
             -------------
  608          void ips200_show_chinese (uint16 x, uint16 y, uint8 size, const uint8 *chinese_buffer, uint8 number, cons
             -t uint16 color)
  609          {
  610   1      
  611   1      
  612   1          int i, j, k;
  613   1          uint8 temp, temp1, temp2;
  614   1          const uint8 *p_data;
  615   1          
  616   1          temp2 = size / 8;
  617   1          
  618   1      
  619   1        IPS200_CS(0);
  620   1      
  621   1          ips200_set_region(x, y, number * size - 1 + x, y + size - 1);
  622   1          
  623   1          for(i = 0; i < size; i ++)
  624   1          {
  625   2              temp1 = number;
  626   2              p_data = chinese_buffer + i * temp2;
  627   2              while(temp1 --)
  628   2              {
  629   3                  for(k = 0; k < temp2; k ++)
  630   3                  {
  631   4                      for(j = 8; j > 0; j --)
  632   4                      {
  633   5                          temp = (*p_data >> (j - 1)) & 0x01;
  634   5                          if(temp)
  635   5                          {
  636   6                              ips200_write_16bit_data(color);
  637   6                          }
  638   5                          else
  639   5                          {
  640   6                              ips200_write_16bit_data(ips200_bgcolor);
  641   6                          }
  642   5                      }
  643   4                      p_data ++;
  644   4                  }
  645   3                  p_data = p_data - temp2 + temp2 * size;
  646   3              }   
  647   2          }
  648   1      
  649   1        IPS200_CS(1);
  650   1      
  651   1      }
  652          
  653          //-------------------------------------------------------------------------------------------------------
             -------------
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                15/07/24  23:32:09  PAGE 12  

  654          // å‡½æ•°ç®€ä»‹     2å¯¸ IPSæ¶²æ™¶åˆå§‹åŒ–
  655          // å‚æ•°è¯´æ˜     type_select     ä¸¤å¯¸å±æ¥å£ç±»å‹ IPS200_TYPE_SPI ä¸º SPI æ¥å£ä¸²å£ä¸¤å¯¸å± I
             -PS200_TYPE_PARALLEL8 ä¸º 8080 åè®®å…«ä½å¹¶å£ä¸¤å¯¸å±
  656          // è¿”å›å‚æ•°     void
  657          // ä½¿ç”¨ç¤ºä¾‹     ips200_init(IPS200_TYPE_PARALLEL8);
  658          // å¤‡æ³¨ä¿¡æ¯
  659          //-------------------------------------------------------------------------------------------------------
             -------------
  660          void ips200_init_spi ()
  661          {
  662   1        IPS200_BL(1);
  663   1        IPS200_DC(0);
  664   1        IPS200_RST(0);
  665   1        
  666   1      
  667   1        spi_init(IPS200_SPIN_PIN, IPS200_SCL_PIN, IPS200_SDA_PIN, IPS200_SDA_IN_PIN, 0, MASTER, SPI_SYSclk_DIV_2
             -);
  668   1      
  669   1      
  670   1        
  671   1      
  672   1          ips200_set_dir(ips200_display_dir);
  673   1          ips200_set_color(ips200_pencolor, ips200_bgcolor);
  674   1      
  675   1          
  676   1          IPS200_BL(1);
  677   1          IPS200_RST(0);  
  678   1          delay_ms(5);
  679   1          IPS200_RST(1);      
  680   1          delay_ms(120);
  681   1          
  682   1      
  683   1        IPS200_CS(0);
  684   1      
  685   1          ips200_write_command(0x11);
  686   1          delay_ms(120);
  687   1      
  688   1          ips200_write_command(0x36);
  689   1          if(ips200_display_dir == 0)
  690   1          {
  691   2              ips200_write_8bit_data(0x00);
  692   2          }
  693   1          else if(ips200_display_dir == 1)
  694   1          {
  695   2              ips200_write_8bit_data(0xC0);
  696   2          }
  697   1          else if(ips200_display_dir == 2)
  698   1          {
  699   2              ips200_write_8bit_data(0x70);
  700   2          }
  701   1          else
  702   1          {
  703   2              ips200_write_8bit_data(0xA0);
  704   2          }
  705   1      
  706   1          ips200_write_command(0x3A);            
  707   1          ips200_write_8bit_data(0x05);
  708   1          
  709   1          ips200_write_command(0xB2);            
  710   1          ips200_write_8bit_data(0x0C);
  711   1          ips200_write_8bit_data(0x0C); 
  712   1          ips200_write_8bit_data(0x00); 
  713   1          ips200_write_8bit_data(0x33); 
  714   1          ips200_write_8bit_data(0x33);           
  715   1      
  716   1          ips200_write_command(0xB7);            
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                15/07/24  23:32:09  PAGE 13  

  717   1          ips200_write_8bit_data(0x35);
  718   1      
  719   1          ips200_write_command(0xBB);            
  720   1          ips200_write_8bit_data(0x29);                                               // 32 Vcom=1.35V
  721   1                                                                  
  722   1          ips200_write_command(0xC2);            
  723   1          ips200_write_8bit_data(0x01);
  724   1      
  725   1          ips200_write_command(0xC3);            
  726   1          ips200_write_8bit_data(0x19);                                               // GVDD=4.8V 
  727   1                                                                  
  728   1          ips200_write_command(0xC4);            
  729   1          ips200_write_8bit_data(0x20);                                               // VDV, 0x20:0v
  730   1      
  731   1          ips200_write_command(0xC5);            
  732   1          ips200_write_8bit_data(0x1A);                                               // VCOM Offset Set
  733   1      
  734   1          ips200_write_command(0xC6);            
  735   1          ips200_write_8bit_data(0x01F);                                              // 0x0F:60Hz          
  736   1      
  737   1          ips200_write_command(0xD0);            
  738   1          ips200_write_8bit_data(0xA4);
  739   1          ips200_write_8bit_data(0xA1);                                                                        
             -                                                                                                                   
  740   1                      
  741   1          ips200_write_command(0xE0);     
  742   1          ips200_write_8bit_data(0xD0);   
  743   1          ips200_write_8bit_data(0x08);   
  744   1          ips200_write_8bit_data(0x0E);   
  745   1          ips200_write_8bit_data(0x09);   
  746   1          ips200_write_8bit_data(0x09);   
  747   1          ips200_write_8bit_data(0x05);   
  748   1          ips200_write_8bit_data(0x31);   
  749   1          ips200_write_8bit_data(0x33);   
  750   1          ips200_write_8bit_data(0x48);   
  751   1          ips200_write_8bit_data(0x17);   
  752   1          ips200_write_8bit_data(0x14);   
  753   1          ips200_write_8bit_data(0x15);   
  754   1          ips200_write_8bit_data(0x31);   
  755   1          ips200_write_8bit_data(0x34);   
  756   1      
  757   1          ips200_write_command(0xE1);     
  758   1          ips200_write_8bit_data(0xD0);   
  759   1          ips200_write_8bit_data(0x08);   
  760   1          ips200_write_8bit_data(0x0E);   
  761   1          ips200_write_8bit_data(0x09);   
  762   1          ips200_write_8bit_data(0x09); 
  763   1          ips200_write_8bit_data(0x15);   
  764   1          ips200_write_8bit_data(0x31);   
  765   1          ips200_write_8bit_data(0x33);   
  766   1          ips200_write_8bit_data(0x48);   
  767   1          ips200_write_8bit_data(0x17);   
  768   1          ips200_write_8bit_data(0x14);   
  769   1          ips200_write_8bit_data(0x15);   
  770   1          ips200_write_8bit_data(0x31);   
  771   1          ips200_write_8bit_data(0x34);   
  772   1      
  773   1          ips200_write_command(0x21);
  774   1          
  775   1          ips200_write_command(0x29);
  776   1      
  777   1        IPS200_CS(1);
  778   1      
  779   1      
  780   1          ips200_clear();                                                             // åˆå§‹åŒ–ä¸ºç™½å±
  781   1      }
C251 COMPILER V5.60.0,  SEEKFREE_IPS200_SPI                                                15/07/24  23:32:09  PAGE 14  



Module Information          Static   Overlayable
------------------------------------------------
  code size            =      3238     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =       246     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        42     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
